"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[2640],{3905:function(e,t,n){n.d(t,{Zo:function(){return c},kt:function(){return m}});var a=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);t&&(a=a.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,a)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?o(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):o(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,a,r=function(e,t){if(null==e)return{};var n,a,r={},o=Object.keys(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(a=0;a<o.length;a++)n=o[a],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=a.createContext({}),h=function(e){var t=a.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},c=function(e){var t=h(e.components);return a.createElement(l.Provider,{value:t},e.children)},p={inlineCode:"code",wrapper:function(e){var t=e.children;return a.createElement(a.Fragment,{},t)}},d=a.forwardRef((function(e,t){var n=e.components,r=e.mdxType,o=e.originalType,l=e.parentName,c=s(e,["components","mdxType","originalType","parentName"]),d=h(n),m=r,u=d["".concat(l,".").concat(m)]||d[m]||p[m]||o;return n?a.createElement(u,i(i({ref:t},c),{},{components:n})):a.createElement(u,i({ref:t},c))}));function m(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var o=n.length,i=new Array(o);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var h=2;h<o;h++)i[h]=n[h];return a.createElement.apply(null,i)}return a.createElement.apply(null,n)}d.displayName="MDXCreateElement"},9838:function(e,t,n){n.r(t),n.d(t,{assets:function(){return c},contentTitle:function(){return l},default:function(){return m},frontMatter:function(){return s},metadata:function(){return h},toc:function(){return p}});var a=n(7462),r=n(3366),o=(n(7294),n(3905)),i=["components"],s={title:'Object methods and "this" (Part 1B)',sidebar_label:"Object methods & this",pagination_next:null,pagination_prev:null,hide_table_of_contents:!1,sidebar_position:5},l="Object methods and  this",h={unversionedId:"extra/this",id:"extra/this",title:'Object methods and "this" (Part 1B)',description:"Credits: This material has been written by Matti Luukkainen from University of Helsinki.",source:"@site/docs/extra/this.md",sourceDirName:"extra",slug:"/extra/this",permalink:"/sp2022/extra/this",tags:[],version:"current",sidebarPosition:5,frontMatter:{title:'Object methods and "this" (Part 1B)',sidebar_label:"Object methods & this",pagination_next:null,pagination_prev:null,hide_table_of_contents:!1,sidebar_position:5},sidebar:"docs"},c={},p=[{value:"Reference",id:"reference",level:2}],d={toc:p};function m(e){var t=e.components,n=(0,r.Z)(e,i);return(0,o.kt)("wrapper",(0,a.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,o.kt)("h1",{id:"object-methods-and--this"},"Object methods and  this"),(0,o.kt)("div",{className:"admonition admonition-info alert alert--info"},(0,o.kt)("div",{parentName:"div",className:"admonition-heading"},(0,o.kt)("h5",{parentName:"div"},(0,o.kt)("span",{parentName:"h5",className:"admonition-icon"},(0,o.kt)("svg",{parentName:"span",xmlns:"http://www.w3.org/2000/svg",width:"14",height:"16",viewBox:"0 0 14 16"},(0,o.kt)("path",{parentName:"svg",fillRule:"evenodd",d:"M7 2.3c3.14 0 5.7 2.56 5.7 5.7s-2.56 5.7-5.7 5.7A5.71 5.71 0 0 1 1.3 8c0-3.14 2.56-5.7 5.7-5.7zM7 1C3.14 1 0 4.14 0 8s3.14 7 7 7 7-3.14 7-7-3.14-7-7-7zm1 3H6v5h2V4zm0 6H6v2h2v-2z"}))),"info")),(0,o.kt)("div",{parentName:"div",className:"admonition-content"},(0,o.kt)("p",{parentName:"div"}," ",(0,o.kt)("strong",{parentName:"p"},"Credits"),": This material has been written by ",(0,o.kt)("a",{parentName:"p",href:"https://github.com/mluukkai"},"Matti Luukkainen")," from ",(0,o.kt)("a",{parentName:"p",href:"https://fullstackopen.com/en/"},"University of Helsinki"),". "),(0,o.kt)("p",{parentName:"div"}," The material is licensed under the Creative Commons BY-NC-SA 3.0 License."))),(0,o.kt)("p",null,"Due to the fact that during this course we are using a version of React containing React Hooks we have no need for defining objects with methods. ",(0,o.kt)("strong",{parentName:"p"},"The contents of this chapter are not relevant to the course")," but are certainly in many ways good to know. In particular when using older versions of React one must understand the topics of this chapter."),(0,o.kt)("p",null,"Arrow functions and functions defined using the ",(0,o.kt)("em",{parentName:"p"},"function")," keyword vary substantially when it comes to how they behave with respect to the keyword ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this"},"this"),", which refers to the object itself."),(0,o.kt)("p",null,"We can assign methods to an object by defining properties that are functions:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const arto = {\n  name: 'Arto Hellas',\n  age: 35,\n  education: 'PhD',\n  // highlight-start\n  greet: function() {\n    console.log('hello, my name is ' + this.name)\n  },\n  // highlight-end\n}\n\narto.greet()  // \"hello, my name is Arto Hellas\" gets printed\n")),(0,o.kt)("p",null,"Methods can be assigned to objects even after the creation of the object:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const arto = {\n  name: 'Arto Hellas',\n  age: 35,\n  education: 'PhD',\n  greet: function() {\n    console.log('hello, my name is ' + this.name)\n  },\n}\n\n// highlight-start\narto.growOlder = function() {\n  this.age += 1\n}\n// highlight-end\n\nconsole.log(arto.age)   // 35 is printed\narto.growOlder()\nconsole.log(arto.age)   // 36 is printed\n")),(0,o.kt)("p",null,"Let's slightly modify the object:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const arto = {\n  name: 'Arto Hellas',\n  age: 35,\n  education: 'PhD',\n  greet: function() {\n    console.log('hello, my name is ' + this.name)\n  },\n  // highlight-start\n  doAddition: function(a, b) {\n    console.log(a + b)\n  },\n  // highlight-end\n}\n\narto.doAddition(1, 4)        // 5 is printed\n\nconst referenceToAddition = arto.doAddition\nreferenceToAddition(10, 15)   // 25 is printed\n")),(0,o.kt)("p",null,"Now the object has the method ",(0,o.kt)("em",{parentName:"p"},"doAddition")," which calculates the sum of numbers given to it as parameters. The method is called in the usual way, using the object ",(0,o.kt)("em",null,"arto.doAddition(1, 4)")," or by storing a ",(0,o.kt)("i",null,"method reference")," in a variable and calling the method through the variable: ",(0,o.kt)("em",null,"referenceToAddition(10, 15)"),"."),(0,o.kt)("p",null,"If we try to do the same with the method ",(0,o.kt)("em",{parentName:"p"},"greet")," we run into an issue:"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},'arto.greet()       // "hello, my name is Arto Hellas" gets printed\n\nconst referenceToGreet = arto.greet\nreferenceToGreet() // prints "hello, my name is undefined"\n')),(0,o.kt)("p",null,"When calling the method through a reference, the method loses knowledge of what the original ",(0,o.kt)("em",{parentName:"p"},"this")," was. Contrary to other languages, in JavaScript the value of ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Operators/this"},"this")," is defined based on ",(0,o.kt)("i",null,"how the method is called"),". When calling the method through a reference the value of ",(0,o.kt)("em",{parentName:"p"},"this")," becomes the so-called ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Glossary/Global_object"},"global object")," and the end result is often not what the software developer had originally intended."),(0,o.kt)("p",null,"Losing track of ",(0,o.kt)("em",{parentName:"p"},"this"),' when writing JavaScript code brings forth a few potential issues. Situations often arise where React or Node (or more specifically the JavaScript engine of the web browser) needs to call some method in an object that the developer has defined. However, in this course we avoid these issues by using the "this-less" JavaScript.'),(0,o.kt)("p",null,'One situation leading to the "disappearance" of ',(0,o.kt)("em",{parentName:"p"},"this")," arises when we set a timeout to call the ",(0,o.kt)("em",{parentName:"p"},"greet")," function on the ",(0,o.kt)("em",{parentName:"p"},"arto")," object, using the ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/API/WindowOrWorkerGlobalScope/setTimeout"},"setTimeout")," function."),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"const arto = {\n  name: 'Arto Hellas',\n  greet: function() {\n    console.log('hello, my name is ' + this.name)\n  },\n}\n\nsetTimeout(arto.greet, 1000)  // highlight-line\n")),(0,o.kt)("p",null,"As mentioned, the value of ",(0,o.kt)("em",{parentName:"p"},"this")," in JavaScript is defined based on how the method is being called. When ",(0,o.kt)("em",null,"setTimeout")," is calling the method, it is the JavaScript engine that actually calls the method and, at that point, ",(0,o.kt)("em",{parentName:"p"},"this")," refers to the global object."),(0,o.kt)("p",null,"There are several mechanisms by which the original ",(0,o.kt)("em",{parentName:"p"},"this")," can be preserved. One of these is using a method called ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Function/bind"},"bind"),":"),(0,o.kt)("pre",null,(0,o.kt)("code",{parentName:"pre",className:"language-js"},"setTimeout(arto.greet.bind(arto), 1000)\n")),(0,o.kt)("p",null,"Calling ",(0,o.kt)("em",null,"arto.greet.bind(arto)")," creates a new function where ",(0,o.kt)("em",{parentName:"p"},"this")," is bound to point to Arto, independent of where and how the method is being called."),(0,o.kt)("p",null,"Using ",(0,o.kt)("a",{parentName:"p",href:"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Functions/Arrow_functions"},"arrow functions")," it is possible to solve some of the problems related to ",(0,o.kt)("em",{parentName:"p"},"this"),". They should not, however, be used as methods for objects because then ",(0,o.kt)("em",{parentName:"p"},"this")," does not work at all. We will come back later to the behavior of ",(0,o.kt)("em",{parentName:"p"},"this")," in relation to arrow functions."),(0,o.kt)("p",null,"If you want to gain a better understanding of how ",(0,o.kt)("em",{parentName:"p"},"this")," works in JavaScript, the Internet is full of material about the topic, e.g. the screencast series ",(0,o.kt)("a",{parentName:"p",href:"https://egghead.io/courses/understand-javascript-s-this-keyword-in-depth"},"Understand JavaScript's this Keyword in Depth")," by ",(0,o.kt)("a",{parentName:"p",href:"https://egghead.io"},"egghead.io")," is highly recommended!"),(0,o.kt)("h2",{id:"reference"},"Reference"),(0,o.kt)("ul",null,(0,o.kt)("li",{parentName:"ul"},(0,o.kt)("a",{parentName:"li",href:"https://fullstackopen.com"},"FullStackOpen: Part1 B"))))}m.isMDXComponent=!0}}]);