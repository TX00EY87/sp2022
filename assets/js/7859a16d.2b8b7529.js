"use strict";(self.webpackChunkmy_website=self.webpackChunkmy_website||[]).push([[4123],{3905:function(e,t,n){n.d(t,{Zo:function(){return p},kt:function(){return h}});var o=n(7294);function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function a(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?a(Object(n),!0).forEach((function(t){r(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):a(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function s(e,t){if(null==e)return{};var n,o,r=function(e,t){if(null==e)return{};var n,o,r={},a=Object.keys(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||(r[n]=e[n]);return r}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(o=0;o<a.length;o++)n=a[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(r[n]=e[n])}return r}var l=o.createContext({}),c=function(e){var t=o.useContext(l),n=t;return e&&(n="function"==typeof e?e(t):i(i({},t),e)),n},p=function(e){var t=c(e.components);return o.createElement(l.Provider,{value:t},e.children)},u={inlineCode:"code",wrapper:function(e){var t=e.children;return o.createElement(o.Fragment,{},t)}},d=o.forwardRef((function(e,t){var n=e.components,r=e.mdxType,a=e.originalType,l=e.parentName,p=s(e,["components","mdxType","originalType","parentName"]),d=c(n),h=r,m=d["".concat(l,".").concat(h)]||d[h]||u[h]||a;return n?o.createElement(m,i(i({ref:t},p),{},{components:n})):o.createElement(m,i({ref:t},p))}));function h(e,t){var n=arguments,r=t&&t.mdxType;if("string"==typeof e||r){var a=n.length,i=new Array(a);i[0]=d;var s={};for(var l in t)hasOwnProperty.call(t,l)&&(s[l]=t[l]);s.originalType=e,s.mdxType="string"==typeof e?e:r,i[1]=s;for(var c=2;c<a;c++)i[c]=n[c];return o.createElement.apply(null,i)}return o.createElement.apply(null,n)}d.displayName="MDXCreateElement"},7370:function(e,t,n){n.r(t),n.d(t,{assets:function(){return p},contentTitle:function(){return l},default:function(){return h},frontMatter:function(){return s},metadata:function(){return c},toc:function(){return u}});var o=n(7462),r=n(3366),a=(n(7294),n(3905)),i=["components"],s={title:"Exercises",sidebar_label:"Exercises",pagination_next:null,pagination_prev:null,slug:"exercises",hide_table_of_contents:!1,sidebar_position:2},l="Exercises",c={unversionedId:"lecture-12/exercises",id:"lecture-12/exercises",title:"Exercises",description:"Submission",source:"@site/docs/lecture-12/exercises.md",sourceDirName:"lecture-12",slug:"/lecture-12/exercises",permalink:"/sp2022/lecture-12/exercises",tags:[],version:"current",sidebarPosition:2,frontMatter:{title:"Exercises",sidebar_label:"Exercises",pagination_next:null,pagination_prev:null,slug:"exercises",hide_table_of_contents:!1,sidebar_position:2},sidebar:"docs"},p={},u=[{value:"Submission",id:"submission",level:2},{value:"Phonebook database, step0",id:"phonebook-database-step0",level:2},{value:"Reference",id:"reference",level:2}],d={toc:u};function h(e){var t=e.components,n=(0,r.Z)(e,i);return(0,a.kt)("wrapper",(0,o.Z)({},d,n,{components:t,mdxType:"MDXLayout"}),(0,a.kt)("h1",{id:"exercises"},"Exercises"),(0,a.kt)("h2",{id:"submission"},"Submission"),(0,a.kt)("p",null,"Please submit the ",(0,a.kt)("inlineCode",{parentName:"p"},"*.js")," files to OMA by the deadline. "),(0,a.kt)("h2",{id:"phonebook-database-step0"},"Phonebook database, step0"),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"Command-line database")),(0,a.kt)("p",null,"Create a cloud-based MongoDB database for the phonebook application with MongoDB Atlas. "),(0,a.kt)("p",null,"Create a ",(0,a.kt)("i",null,"mongo.js")," file in the project directory, that can be used for adding entries to the phonebook, and for listing all of the existing entries in the phonebook."),(0,a.kt)("p",null,"The application should work as follows. You use the program by passing three command-line arguments (the first is the password), e.g.:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"node mongo.js yourpassword Anna 040-1234556\n")),(0,a.kt)("p",null,"As a result, the application will print:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"added Anna number 040-1234556 to phonebook\n")),(0,a.kt)("p",null,"The new entry to the phonebook will be saved to the database. Notice that if the name contains whitespace characters, it must be enclosed in quotes:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},'node mongo.js yourpassword "Arto Vihavainen" 045-1232456\n')),(0,a.kt)("p",null,"If the password is the only parameter given to the program, meaning that it is invoked like this:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-bash"},"node mongo.js yourpassword\n")),(0,a.kt)("p",null,"Then the program should display all of the entries in the phonebook:"),(0,a.kt)("pre",null,"phonebook: Anna 040-1234556 Arto Vihavainen 045-1232456 Ada Lovelace 040-1231236"),(0,a.kt)("p",null,"You can get the command-line parameters from the ",(0,a.kt)("a",{parentName:"p",href:"https://nodejs.org/docs/latest-v8.x/api/process.html#process_process_argv"},"process.argv")," variable."),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"NB: do not close the connection in the wrong place"),". E.g. the following code will not work:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Person\n  .find({})\n  .then(persons=> {\n    // ...\n  })\n\nmongoose.connection.close()\n")),(0,a.kt)("p",null,"In the code above the ",(0,a.kt)("i",null,"mongoose.connection.close()")," command will get executed immediately after the ",(0,a.kt)("i",null,"Person.find")," operation is started. This means that the database connection will be closed immediately, and the execution will never get to the point where ",(0,a.kt)("i",null,"Person.find")," operation finishes and the ",(0,a.kt)("i",null,"callback")," function gets called."),(0,a.kt)("p",null,"The correct place for closing the database connection is at the end of the callback function:"),(0,a.kt)("pre",null,(0,a.kt)("code",{parentName:"pre",className:"language-js"},"Person\n  .find({})\n  .then(persons=> {\n    // ...\n    mongoose.connection.close()\n  })\n")),(0,a.kt)("p",null,(0,a.kt)("strong",{parentName:"p"},"NB:")," If you define a model with the name ",(0,a.kt)("i",null,"Person"),", mongoose will automatically name the associated collection as ",(0,a.kt)("i",null,"people"),"."),(0,a.kt)("p",null,"The following exercises are pretty straightforward, but if your frontend stops working with the backend, then finding and fixing the bugs can be quite interesting. "),(0,a.kt)("h2",{id:"reference"},"Reference"),(0,a.kt)("ul",null,(0,a.kt)("li",{parentName:"ul"},(0,a.kt)("a",{parentName:"li",href:"https://fullstackopen.com"},"FullStackOpen: Exercises 3.12."))))}h.isMDXComponent=!0}}]);